# åˆ·é¢˜ç¬”è®°
---

## 1. æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰

### 1.1 æ ¸å¿ƒæ€æƒ³

æ»‘åŠ¨çª—å£æ˜¯ä¸€ç§é«˜æ•ˆè§£å†³**è¿ç»­åŒºé—´é—®é¢˜**çš„ç®—æ³•æŠ€å·§ã€‚
æœ¬è´¨æ€æƒ³ï¼šä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right` ç»´æŠ¤ä¸€ä¸ªåŠ¨æ€åŒºé—´ `[left, right)`ï¼Œ
åœ¨éå†è¿‡ç¨‹ä¸­æ ¹æ®æ¡ä»¶æ‰©å¼ æˆ–æ”¶ç¼©çª—å£ã€‚

**å…¸å‹åº”ç”¨ï¼š**

* æœ€çŸ­/æœ€é•¿å­æ•°ç»„é•¿åº¦
* å­æ•°ç»„å’Œã€å¹³å‡å€¼ã€ä¹˜ç§¯é—®é¢˜
* ç¬¦åˆæ¡ä»¶çš„å­ä¸²ï¼ˆå¦‚æœ€å°è¦†ç›–å­ä¸²ï¼‰

æ»‘åŠ¨çª—å£å¯çœ‹ä½œâ€œåŒæŒ‡é’ˆâ€æŠ€å·§çš„ç‰¹åŒ–ï¼Œç”¨äºå¤„ç†**è¿ç»­åŒºé—´é—®é¢˜**ã€‚
è€Œâ€œåŒæŒ‡é’ˆâ€æ›´å¹¿æ³›ï¼Œç”¨äºæ’åºæ•°ç»„ã€é“¾è¡¨éå†ã€å¿«æ…¢æŒ‡é’ˆç­‰ã€‚

---

### 1.2 æ ‡å‡†é€»è¾‘ç»“æ„

```cpp
int left = 0, right = 0;
while (right < n) {
    // Step 1: æ‰©å¤§çª—å£
    æ›´æ–°çª—å£çŠ¶æ€;
    right++;

    // Step 2: æ”¶ç¼©çª—å£ï¼ˆæ»¡è¶³æ¡ä»¶æ—¶ï¼‰
    while (çª—å£æ»¡è¶³æ¡ä»¶) {
        æ›´æ–°ç­”æ¡ˆ;
        ç§»å‡º nums[left];
        left++;
    }
}
```

**ç‰¹å¾æ€»ç»“ï¼š**

* `right` æ‰©å±•çª—å£ï¼›
* `left` æ”¶ç¼©çª—å£ï¼›
* ä¸¤æŒ‡é’ˆåªå‘å³ç§»åŠ¨ï¼›
* æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®ä¸¤æ¬¡ â†’ æ—¶é—´å¤æ‚åº¦ O(n)ã€‚

---

### 1.3 ä¾‹é¢˜ï¼šLeetCode 209 â€“ Minimum Size Subarray Sum

ğŸ“ [LeetCode 209. Minimum Size Subarray Sum](https://leetcode.cn/problems/minimum-size-subarray-sum/)

#### 1.3.1 é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡å€¼ `target`ï¼Œ
æ‰¾å‡ºå…¶å’Œ **â‰¥ target** çš„æœ€çŸ­è¿ç»­å­æ•°ç»„é•¿åº¦ã€‚
è‹¥ä¸å­˜åœ¨ï¼Œè¿”å› `0`ã€‚

**ç¤ºä¾‹è¾“å…¥ï¼š**

```cpp
target = 7
nums = [2,3,1,2,4,3]
```

**è¾“å‡ºï¼š**

```
2   // å¯¹åº”å­æ•°ç»„ [4,3]
```

---

### 1.4 ä»£ç å®ä¾‹å¯¹æ¯”

#### 1.4.1 æˆ‘çš„åŸå§‹å†™æ³•ï¼ˆéæ ‡å‡†ç‰ˆæœ¬ï¼‰

```cpp
class Solution {
public:
    int minSubArrayLen(int target, vector<int>& nums) {
        int n = nums.size();
        int left = 0, right = 0;
        int result = n + 1;
        int sum = 0;
        while (left < n && right < n) {
            while (sum < target && right < n) {
                sum += nums[right];
                right++;
            }
            while (sum >= target && left < right) {
                result = ((right - left) < result) ? (right - left) : result;
                sum -= nums[left];
                left++;
            }
        }
        if (result == n + 1)
            return 0;
        return result;
    }
};
```

**å­˜åœ¨é—®é¢˜ï¼š**

* å¤–å±‚æ¡ä»¶ `left < n && right < n` å¤šä½™ï¼›
* å¯èƒ½å¯¼è‡´å³æŒ‡é’ˆåœæ»ã€é™·å…¥æ­»å¾ªç¯ï¼›
* çª—å£é•¿åº¦å°‘è®¡ç®—äº† `+1`ï¼›
* å†…å¤–å±‚å¾ªç¯é€»è¾‘ä¸å¯¹ç§°ï¼Œå¯è¯»æ€§å·®ã€‚

---

#### 1.4.2 å®˜æ–¹æ ‡å‡†å†™æ³•ï¼ˆæ­£ç¡®ç‰ˆæœ¬ï¼‰

```cpp
class Solution {
public:
    int minSubArrayLen(int s, vector<int>& nums) {
        int n = nums.size();
        if (n == 0) return 0;

        int ans = INT_MAX;
        int start = 0, end = 0;
        int sum = 0;

        while (end < n) {
            sum += nums[end];
            while (sum >= s) {
                ans = min(ans, end - start + 1);
                sum -= nums[start];
                start++;
            }
            end++;
        }
        return ans == INT_MAX ? 0 : ans;
    }
};
```

**é€»è¾‘è¦ç‚¹ï¼š**

* å¤–å±‚å¾ªç¯ç§»åŠ¨ `end`ï¼›
* å†…å±‚å¾ªç¯æ”¶ç¼© `start`ï¼›
* æ¯ä¸ªå…ƒç´ ä»…è¢«åŠ å…¥ä¸ç§»å‡ºå„ä¸€æ¬¡ï¼›
* æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚

---

### 1.5 æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–

|  æ­¥éª¤ | çª—å£ `[start, end]` | å…ƒç´         | å½“å‰å’Œ | â‰¥7? | æœ€çŸ­é•¿åº¦ |
| :-: | :---------------- | :-------- | :-: | :-: | :--: |
|  1  | [0,0]             | [2]       |  2  |  å¦  |   -  |
|  2  | [0,1]             | [2,3]     |  5  |  å¦  |   -  |
|  3  | [0,2]             | [2,3,1]   |  6  |  å¦  |   -  |
|  4  | [0,3]             | [2,3,1,2] |  8  |  âœ…  |   4  |
|  5  | [1,3]             | [3,1,2]   |  6  |  å¦  |   -  |
|  6  | [1,4]             | [3,1,2,4] |  10 |  âœ…  |   4  |
|  7  | [2,4]             | [1,2,4]   |  7  |  âœ…  |   3  |
|  8  | [3,4]             | [2,4]     |  6  |  å¦  |   -  |
|  9  | [3,5]             | [2,4,3]   |  9  |  âœ…  |   3  |
|  10 | [4,5]             | [4,3]     |  7  |  âœ…  |   2  |

âœ… **æœ€ç»ˆç­”æ¡ˆï¼š2**

---

### 1.6 å¸¸è§é™·é˜±ä¸æ³¨æ„ç‚¹

| é”™è¯¯ç‚¹      | åŸå›                                  | ä¿®æ­£æ–¹æ³•                   |
| :------- | :--------------------------------- | :--------------------- |
| æŒ‡é’ˆæ›´æ–°æ–¹å‘é”™è¯¯ | `right` å›é€€ç ´åå•è°ƒæ€§                    | åªå¢ä¸é€€                   |
| å¤–å±‚æ¡ä»¶é”™è¯¯   | ä½¿ç”¨ `left < n && right < n` å¯¼è‡´å³æŒ‡é’ˆåœæ» | ç”¨ `while (right < n)`  |
| çª—å£é•¿åº¦è®¡ç®—é”™è¯¯ | å¿˜è®° `+1`                            | é•¿åº¦ = `end - start + 1` |
| sum æº¢å‡ºé—®é¢˜ | æœªåŠæ—¶æ”¶ç¼©                              | æ»¡è¶³æ¡ä»¶åç«‹å³è¿›å…¥æ”¶ç¼©å¾ªç¯          |
| ç»“æœåˆå§‹åŒ–ä¸å½“  | æ²¡ç”¨ INT_MAX                         | åº”åˆå§‹åŒ–ä¸ºæå¤§å€¼å¹¶æœ€ç»ˆåˆ¤æ–­          |

---

### 1.7 å¤æ‚åº¦åˆ†æ

* **æ—¶é—´å¤æ‚åº¦ï¼š** O(n)
  æ¯ä¸ªå…ƒç´ æœ€å¤šè¿›å…¥ä¸ç¦»å¼€çª—å£å„ä¸€æ¬¡ã€‚
* **ç©ºé—´å¤æ‚åº¦ï¼š** O(1)

---

### 1.8 æ€ç»´å£è¯€

> â€œæ»‘åŠ¨çª—å£çš„æœ¬è´¨æ˜¯ï¼š**æ‰©å±•ç›´åˆ°æ»¡è¶³ï¼Œæ”¶ç¼©ç›´åˆ°ä¸æ»¡è¶³**ã€‚â€

* å¯¹äºâ€œæœ€å°é•¿åº¦â€é—®é¢˜ï¼šæ»¡è¶³æ¡ä»¶æ—¶æ”¶ç¼©ï¼›
* å¯¹äºâ€œæœ€å¤§é•¿åº¦â€é—®é¢˜ï¼šä¸æ»¡è¶³æ¡ä»¶æ—¶æ‰©å±•ã€‚

---

### 1.9 æ¨¡æ¿è®°å¿†è¡¨

| é˜¶æ®µ | æ“ä½œ               | æ¡ä»¶           | ç›®çš„     |
| :- | :--------------- | :----------- | :----- |
| 1  | æ‰©å±•çª—å£ (`right++`) | æœªæ»¡è¶³æ¡ä»¶        | åŒ…å«æ›´å¤šå…ƒç´  |
| 2  | æ”¶ç¼©çª—å£ (`left++`)  | å·²æ»¡è¶³æ¡ä»¶        | å¯»æ‰¾æœ€ä¼˜è§£  |
| 3  | æ›´æ–°ç»“æœ             | æ»¡è¶³æ¡ä»¶æ—¶        | è®°å½•æœ€ä¼˜å€¼  |
| 4  | ç»“æŸå¾ªç¯             | `right == n` | éå†å®Œæ¯•   |

---

### 1.10 æ‹“å±•é¢˜å‹å»ºè®®

| é¢˜ç›®æ–¹å‘                | ç¤ºä¾‹ |
| :---------------------- | :--: |
| æœ€çŸ­å­æ•°ç»„å’Œ â‰¥ target   | [LeetCode 209 Â· Minimum Size Subarray Sum](https://leetcode.cn/problems/minimum-size-subarray-sum/) |
| å« K ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² | [LeetCode 340 Â· Longest Substring with At Most K Distinct Characters](https://leetcode.cn/problems/longest-substring-with-at-most-k-distinct-characters/) |
| æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²     | [LeetCode 3 Â· Longest Substring Without Repeating Characters](https://leetcode.cn/problems/longest-substring-without-repeating-characters/) |
| æœ€å°è¦†ç›–å­ä¸²             | [LeetCode 76 Â· Minimum Window Substring](https://leetcode.cn/problems/minimum-window-substring/) |
| å›ºå®šçª—å£æœ€å¤§/æœ€å°å€¼       | [LeetCode 239 Â· Sliding Window Maximum](https://leetcode.cn/problems/sliding-window-maximum/) |
---


## 2. é€’å½’ï¼ˆRecursionï¼‰

### 2.1 æ ¸å¿ƒæ€æƒ³  

**é€’å½’ï¼ˆRecursionï¼‰** æ˜¯ä¸€ç§â€œè®©å‡½æ•°è°ƒç”¨è‡ªèº«â€çš„ç®—æ³•æ€æƒ³ï¼Œç”¨äºè§£å†³å¯ä»¥åˆ†è§£ä¸ºç›¸ä¼¼å­é—®é¢˜çš„ä»»åŠ¡ã€‚  
é€’å½’åŒ…å«ä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼š  

1. **ç»ˆæ­¢æ¡ä»¶ï¼ˆBase Caseï¼‰**ï¼šå½“é—®é¢˜è¶³å¤Ÿå°ï¼Œå¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚  
2. **é€’å½’è°ƒç”¨ï¼ˆRecurrenceï¼‰**ï¼šå°†å¤§é—®é¢˜åˆ†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ã€‚  
3. **ç»“æœåˆå¹¶ï¼ˆReturn / Combineï¼‰**ï¼šå°†å­é—®é¢˜ç»“æœå‘ä¸Šä¼ é€’ã€‚

é“¾è¡¨æ˜¯å¤©ç„¶é€‚åˆé€’å½’çš„ç»“æ„ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ•´ä¸ªé“¾è¡¨å°±åƒä¸€ä¸ªâ€œä»å¤´åˆ°å°¾çš„åµŒå¥—ç»“æ„â€ã€‚  
å› æ­¤ï¼Œè®¸å¤šé“¾è¡¨é¢˜ï¼ˆå¦‚åˆ é™¤èŠ‚ç‚¹ã€åè½¬é“¾è¡¨ã€åˆå¹¶é“¾è¡¨ï¼‰éƒ½èƒ½ç”¨é€’å½’ elegantly åœ°å®ç°ã€‚

---

### 2.2 ç§»é™¤é“¾è¡¨å…ƒç´ ï¼ˆRemove Linked List Elementsï¼‰

é¢˜å·ï¼šLeetCode 203  
é¢˜æ„ï¼šåˆ é™¤é“¾è¡¨ä¸­æ‰€æœ‰å€¼ç­‰äº `val` çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–°çš„å¤´èŠ‚ç‚¹ã€‚

---

#### 2.2.1 é€’å½’æ³•  

**æ€è·¯åˆ†æï¼š**  
- å¯¹é™¤å¤´èŠ‚ç‚¹å¤–çš„éƒ¨åˆ†é€’å½’åˆ é™¤ç›®æ ‡èŠ‚ç‚¹ï¼›
- å›æº¯æ—¶æ ¹æ®å½“å‰èŠ‚ç‚¹çš„å€¼å†³å®šæ˜¯å¦ä¿ç•™ï¼›
- ç©ºé“¾è¡¨ä¸ºé€’å½’ç»ˆæ­¢æ¡ä»¶ã€‚

**å…³é”®é€»è¾‘ï¼š**
```cpp
head->next = removeElements(head->next, val);
return head->val == val ? head->next : head;
```

**ä»£ç å®ç°ï¼š**

```cpp
class Solution {
public:
    ListNode* removeElements(ListNode* head, int val) {
        if (head == nullptr)
            return head;                        // é€’å½’ç»ˆæ­¢æ¡ä»¶
        head->next = removeElements(head->next, val); // é€’å½’å¤„ç†å­é“¾è¡¨
        return head->val == val ? head->next : head;  // å›æº¯é˜¶æ®µå†³å®šæ˜¯å¦åˆ é™¤å½“å‰èŠ‚ç‚¹
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

* æ—¶é—´å¤æ‚åº¦ï¼šO(n)
* ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆé€’å½’è°ƒç”¨æ ˆï¼‰

---

#### 2.2.2 è¿­ä»£æ³•ï¼ˆå®˜æ–¹å†™æ³•ï¼‰

**æ€è·¯åˆ†æï¼š**

* åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ `dummyHead` è¿æ¥åŸé“¾è¡¨ï¼›
* ä½¿ç”¨æŒ‡é’ˆ `temp` éå†ï¼›
* è‹¥ `temp->next->val == val`ï¼Œåˆ™è·³è¿‡ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›
* å¦åˆ™å‘åç§»åŠ¨ã€‚

**ä»£ç å®ç°ï¼š**

```cpp
class Solution {
public:
    ListNode* removeElements(ListNode* head, int val) {
        ListNode* dummyHead = new ListNode(0, head);
        ListNode* temp = dummyHead;
        while (temp->next != nullptr) {
            if (temp->next->val == val)
                temp->next = temp->next->next;
            else
                temp = temp->next;
        }
        return dummyHead->next;
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

* æ—¶é—´å¤æ‚åº¦ï¼šO(n)
* ç©ºé—´å¤æ‚åº¦ï¼šO(1)

---

#### 2.2.3 æˆ‘çš„ç‰ˆæœ¬ï¼ˆæ‰‹åŠ¨è·³è¿‡å¤´èŠ‚ç‚¹æ³•ï¼‰

**æ€è·¯åˆ†æï¼š**

* è‹¥å¤´èŠ‚ç‚¹ç­‰äºç›®æ ‡å€¼ï¼Œéœ€è¦ä¸æ–­å‰ç§»ï¼›
* ä¹‹åç”¨ä¸¤ä¸ªæŒ‡é’ˆ `behind` ä¸ `temp` ç»´æŠ¤é“¾è¡¨ï¼›
* è‹¥ä¸­é—´èŠ‚ç‚¹å€¼ä¸º `val`ï¼Œè·³è¿‡å®ƒï¼Œå¦åˆ™ä¸¤æŒ‡é’ˆåŒæ—¶å‰ç§»ï¼›
* æœ€åå¤„ç†å°¾èŠ‚ç‚¹æ˜¯å¦åˆ é™¤ã€‚

**ä»£ç å®ç°ï¼š**

```cpp
class Solution {
public:
    ListNode* removeElements(ListNode* head, int val) {
        if (head == nullptr)
            return nullptr;

        // è·³è¿‡å‰å¯¼ç­‰äº val çš„èŠ‚ç‚¹
        while (head->val == val) {
            head = head->next;
            if (head == nullptr)
                return nullptr;
        }

        ListNode* temp = head->next;
        ListNode* behind = head;
        if (temp == nullptr)
            return head;

        // åˆ é™¤ä¸­é—´èŠ‚ç‚¹
        while (temp->next != nullptr) {
            if (temp->val == val) {
                temp = temp->next;
                behind->next = temp;
            } else {
                temp = temp->next;
                behind = behind->next;
            }
        }

        // å¤„ç†æœ€åä¸€ä¸ªèŠ‚ç‚¹
        if (temp->val == val)
            behind->next = nullptr;

        return head;
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

* æ—¶é—´å¤æ‚åº¦ï¼šO(n)
* ç©ºé—´å¤æ‚åº¦ï¼šO(1)

---

#### 2.2.4 ä¸‰ç§å†™æ³•æ¯”è¾ƒ

| å¯¹æ¯”ç»´åº¦    | é€’å½’æ³•    | å®˜æ–¹è¿­ä»£æ³•     | æˆ‘çš„å®ç°    |
| ------- | ------ | --------- | ------- |
| åˆ é™¤å¤´èŠ‚ç‚¹æ–¹å¼ | é€’å½’è‡ªç„¶å¤„ç† | ä½¿ç”¨å“‘èŠ‚ç‚¹ç®€åŒ–   | æ‰‹åŠ¨å‰ç§»è·³è¿‡  |
| åˆ é™¤é€»è¾‘å®ç°  | é€šè¿‡å›æº¯åˆ¤æ–­ | æŒ‡é’ˆä¿®æ”¹ next | åŒæŒ‡é’ˆè·³è¿‡èŠ‚ç‚¹ |
| å¯è¯»æ€§     | ç®€æ´ä¼˜é›…   | æ¸…æ™°æ˜“ç»´æŠ¤     | è¾ƒç¹çä½†ç›´è§‚  |
| æ—¶é—´å¤æ‚åº¦   | O(n)   | O(n)      | O(n)    |
| ç©ºé—´å¤æ‚åº¦   | O(n)   | O(1)      | O(1)    |

---
### 2.2.5 é€’å½’ä¾‹é¢˜2
é¢˜å·ï¼š[LeetCode 24 - Swap Nodes in Pairs](https://leetcode.cn/problems/swap-nodes-in-pairs/) 
é¢˜æ„ï¼šä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„å¤´èŠ‚ç‚¹ã€‚
```cpp
 ListNode* swapPairs(ListNode* head) {
        if(head==nullptr||head->next==nullptr)
        return head;
        ListNode* newnode=head->next;
        head->next=swapPairs(newnode->next);
        newnode->next=head;
        return newnode;
    }
```
è¿™é“é¢˜ä¸å…¶ä»–é€’å½’ä¸åŒçš„æ˜¯ä»–çš„é€’å½’å¤„ç†åè¦è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢æ“ä½œï¼Œé€’å½’çš„æ ¸å¿ƒæ€æƒ³ä¾ç„¶æ˜¯å°†å¤§é—®é¢˜åˆ†è§£ä¸ºå°é—®é¢˜ï¼Œå…ˆå¤„ç†åé¢çš„èŠ‚ç‚¹ï¼Œå†å›æº¯å¤„ç†å½“å‰èŠ‚ç‚¹çš„äº¤æ¢ã€‚
#### 2.2.6 æ€ç»´æ€»ç»“

1. é€’å½’çš„é­…åŠ›åœ¨äºï¼š**ä½ ä¸éœ€è¦åŒæ—¶è€ƒè™‘æ‰€æœ‰èŠ‚ç‚¹ï¼Œåªè¦ç›¸ä¿¡â€œå­é—®é¢˜å·²è§£å†³â€**ã€‚
2. æ¯ä¸€å±‚é€’å½’ä»…éœ€æ€è€ƒâ€œå½“å‰èŠ‚ç‚¹æ˜¯å¦ä¿ç•™â€ï¼Œè¿™è®©å¤æ‚æŒ‡é’ˆæ“ä½œå˜å¾—é€»è¾‘ç®€å•ã€‚
3. ä½†é€’å½’ä¹Ÿæœ‰å±€é™â€”â€”åœ¨æé•¿é“¾è¡¨ä¸­å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼Œå› æ­¤é¢è¯•ä¸­å¸¸ç”¨è¿­ä»£æ³•ã€‚
4. ç†è§£è¿™é“é¢˜çš„é€’å½’æ€æƒ³ï¼Œæ˜¯è¿›å…¥é“¾è¡¨é«˜é˜¶é€’å½’é¢˜ï¼ˆå¦‚åè½¬ã€åˆå¹¶ï¼‰çš„åŸºç¡€ã€‚

---

### 2.3 é€’å½’çš„é€šç”¨æ¨¡æ¿

```cpp
è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°) {
    // 1. ç»ˆæ­¢æ¡ä»¶
    if (ç»ˆæ­¢æ¡ä»¶)
        return åŸºç¡€ç»“æœ;

    // 2. é€’å½’è°ƒç”¨
    å­é—®é¢˜ç»“æœ = å‡½æ•°å(å­é—®é¢˜å‚æ•°);

    // 3. åˆå¹¶ç»“æœ
    return å½“å‰ç»“æœä¸å­ç»“æœçš„ç»„åˆ;
}
```

---

### 2.4 é€’å½’çš„å¸¸è§åº”ç”¨æ–¹å‘

| æ¨¡å—       | ç¤ºä¾‹é¢˜ç›®                                                                 | è¯´æ˜         |
| -------- | -------------------------------------------------------------------- | ------------ |
| **é“¾è¡¨**   | [LeetCode 203 Â· ç§»é™¤é“¾è¡¨å…ƒç´ ](https://leetcode.cn/problems/remove-linked-list-elements/)ã€[LeetCode 206 Â· åè½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-linked-list/) | æ“ä½œå¤©ç„¶é€’å½’ç»“æ„ |
| **æ ‘ç»“æ„**  | [LeetCode 104 Â· äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-binary-tree/)ã€[LeetCode 94 Â· äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode.cn/problems/binary-tree-inorder-traversal/) | å¤©ç”Ÿé€’å½’å®šä¹‰   |
| **åˆ†æ²»æ³•**  | [LeetCode 912 Â· æ’åºæ•°ç»„](https://leetcode.cn/problems/sort-an-array/)ï¼ˆå½’å¹¶/å¿«æ’ï¼‰ | æ‹†åˆ†å­åŒºé—´    |
| **å›æº¯æ³•**  | [LeetCode 46 Â· å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)ã€[LeetCode 39 Â· ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/) | æšä¸¾æœç´¢ç©ºé—´   |
| **æ•°å­¦é€’æ¨** | [LeetCode 509 Â· æ–æ³¢é‚£å¥‘æ•°](https://leetcode.cn/problems/fibonacci-number/)ã€[LeetCode 70 Â· çˆ¬æ¥¼æ¢¯](https://leetcode.cn/problems/climbing-stairs/) | è‡ªç„¶æ•°å­¦å®šä¹‰   |

---

### 2.5 å°ç»“

* **é€’å½’æ€æƒ³æœ¬è´¨ï¼š** â€œç”¨å‡½æ•°è°ƒç”¨è‡ªèº«â€ä»¥ç®€åŒ–é—®é¢˜ã€‚
* **é“¾è¡¨é€’å½’ç²¾åï¼š** åˆ©ç”¨å›æº¯é˜¶æ®µè‡ªç„¶ä¿®æ”¹æŒ‡é’ˆã€‚
* **å­¦ä¹ å»ºè®®ï¼š** å…ˆä»â€œç§»é™¤é“¾è¡¨å…ƒç´ â€â€œåè½¬é“¾è¡¨â€ç­‰å…¥æ‰‹ï¼Œå†æ‰©å±•åˆ°äºŒå‰æ ‘é€’å½’ã€‚
é€’å½’çš„é­…åŠ›åœ¨äºæŠ½è±¡æ€ç»´ï¼šä½ ä¸éœ€è¦çŸ¥é“â€œä¸‹ä¸€æ­¥æ€ä¹ˆèµ°â€ï¼Œåªéœ€ç›¸ä¿¡â€œå­é—®é¢˜å·²ç»è¢«è§£å†³â€ã€‚
è¿™æ˜¯ç®—æ³•æ€ç»´ä¸­æœ€æ¥è¿‘â€œè‡ªæˆ‘å¤åˆ¶é€»è¾‘â€çš„ä¸€ç¯â€”â€”ä¸€ç§é€»è¾‘ä¸Šçš„é€’å½’ä¼˜é›…ã€‚

---
## 3. å•é“¾è¡¨æ ¸å¿ƒå‡½æ•°è¯¦è§£

 ä»¥ä¸‹å†…å®¹åŸºäºå®˜æ–¹é¢˜è§£ä»£ç ï¼ˆå‚è€ƒ [LeetCode 707 - è®¾è®¡é“¾è¡¨](https://leetcode.cn/problems/design-linked-list/)ï¼‰ã€‚  

---

### 3.1 æ„é€ å‡½æ•° `MyLinkedList()`

```cpp
MyLinkedList() {
    this->size = 0;
    this->head = new ListNode(0); // åˆ›å»ºå“¨å…µèŠ‚ç‚¹
}
```

#### åŠŸèƒ½è§£æï¼š

åˆå§‹åŒ–é“¾è¡¨ã€‚

* `size` è®°å½•å½“å‰èŠ‚ç‚¹æ•°é‡ï¼›
* `head` æŒ‡å‘å“¨å…µèŠ‚ç‚¹ï¼ˆdummy headï¼‰ï¼Œé¿å…ç©ºé“¾è¡¨æ—¶æ’å…¥/åˆ é™¤é€»è¾‘çš„ç‰¹æ®Šåˆ¤æ–­ã€‚
> ![é“¾è¡¨åˆå§‹åŒ–ç¤ºæ„å›¾](pic/1_1.png)

---

### 3.2 è·å–èŠ‚ç‚¹ `get(int index)`

```cpp
int get(int index) {
    if (index < 0 || index >= size) {
        return -1;
    }
    ListNode *cur = head;
    for (int i = 0; i <= index; i++) {
        cur = cur->next;
    }
    return cur->val;
}
```

#### åŠŸèƒ½è§£æï¼š

çº¿æ€§éå†é“¾è¡¨ï¼Œè·å–ç¬¬ `index` ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚
ç”±äºé“¾è¡¨æ²¡æœ‰éšæœºè®¿é—®èƒ½åŠ›ï¼Œå¿…é¡»ä»å¤´èŠ‚ç‚¹å¼€å§‹ç§»åŠ¨æŒ‡é’ˆã€‚

#### æ—¶é—´å¤æ‚åº¦ï¼š

O(n)

> ![getå‡½æ•°éå†ç¤ºæ„å›¾](pic/1_2.png)

---

### 3.3 å¤´æ’æ³• `addAtHead(int val)`

```cpp
void addAtHead(int val) {
    addAtIndex(0, val);
}
```

#### åŠŸèƒ½è§£æï¼š
åœ¨é“¾è¡¨å¤´éƒ¨ï¼ˆå“¨å…µèŠ‚ç‚¹åï¼‰æ’å…¥æ–°èŠ‚ç‚¹ã€‚
æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨ `addAtIndex(0, val)`ã€‚


### 3.4 å°¾æ’æ³• `addAtTail(int val)`

```cpp
void addAtTail(int val) {
    addAtIndex(size, val);
}
```
#### åŠŸèƒ½è§£æï¼š

åœ¨é“¾è¡¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹ã€‚
ç”±äºæ²¡æœ‰ `tail` æŒ‡é’ˆï¼Œéœ€è¦ä»å¤´éå†è‡³å°¾ã€‚

---

### 3.5 æŒ‡å®šä½ç½®æ’å…¥ `addAtIndex(int index, int val)`

```cpp
void addAtIndex(int index, int val) {
    if (index > size) {
        return;
    }
    index = max(0, index);
    size++;
    ListNode *pred = head;
    for (int i = 0; i < index; i++) {
        pred = pred->next;
    }
    ListNode *toAdd = new ListNode(val);
    toAdd->next = pred->next;
    pred->next = toAdd;
}
```

#### åŠŸèƒ½è§£æï¼š

1. æ£€æŸ¥æ’å…¥ä½ç½®æ˜¯å¦åˆæ³•ï¼›
2. éå†åˆ°æ’å…¥ç‚¹çš„**å‰é©±èŠ‚ç‚¹**ï¼›
3. æ‰§è¡ŒæŒ‡é’ˆäº¤æ¢ï¼Œå®ç°æ’å…¥ï¼›
4. æ›´æ–°é“¾è¡¨é•¿åº¦ã€‚

#### å…³é”®ç‚¹ï¼š

* æ’å…¥åˆ° `index == size` æ—¶ç­‰ä»·äºå°¾æ’ï¼›
* æ’å…¥åˆ° `index == 0` æ—¶ç­‰ä»·äºå¤´æ’ï¼›
* ç”¨ `pred` è®°å½•å‰é©±èŠ‚ç‚¹ï¼Œç¡®ä¿æ“ä½œå®‰å…¨ã€‚
> ![addAtIndexæ’å…¥æŒ‡é’ˆè°ƒæ•´å›¾](pic/1_3.png)

---

### 3.6 åˆ é™¤èŠ‚ç‚¹ `deleteAtIndex(int index)`

```cpp
void deleteAtIndex(int index) {
    if (index < 0 || index >= size) {
        return;
    }
    size--;
    ListNode *pred = head;
    for (int i = 0; i < index; i++) {
        pred = pred->next;
    }
    ListNode *p = pred->next;
    pred->next = pred->next->next;
    delete p;
}
```

#### åŠŸèƒ½è§£æï¼š

1. æ£€æŸ¥åˆ é™¤ä½ç½®æ˜¯å¦åˆæ³•ï¼›
2. éå†åˆ°è¢«åˆ èŠ‚ç‚¹çš„å‰é©±ï¼›
3. è°ƒæ•´æŒ‡é’ˆï¼Œä½¿ç›®æ ‡èŠ‚ç‚¹è¢«â€œè·³è¿‡â€ï¼›
4. é‡Šæ”¾å†…å­˜ã€‚

#### å…³é”®ç‚¹ï¼š

* è‹¥åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`pred` å³ä¸ºå“¨å…µèŠ‚ç‚¹ï¼›
* `delete p;` é˜²æ­¢å†…å­˜æ³„æ¼ã€‚
> ![deleteAtIndexåˆ é™¤èŠ‚ç‚¹ç¤ºæ„å›¾](pic/1_4.png)

---

### 3.7 å°ç»“

é“¾è¡¨çš„æ ¸å¿ƒæ“ä½œæœ¬è´¨éƒ½æ˜¯å¯¹â€œæŒ‡é’ˆæŒ‡å‘â€çš„ç²¾ç¡®æ§åˆ¶ã€‚
ç†è§£â€œå‰é©±èŠ‚ç‚¹ï¼ˆpredï¼‰â€ä¸â€œå½“å‰èŠ‚ç‚¹ï¼ˆcurï¼‰â€çš„å…³ç³»ï¼Œæ˜¯ç¼–å†™æ—  bug é“¾è¡¨ä»£ç çš„å…³é”®ã€‚
åœ¨é“¾è¡¨æ“ä½œä¸­ï¼Œ**ä¸€è¡ŒæŒ‡é’ˆäº¤æ¢ä»£ç å¾€å¾€æ˜¯é€»è¾‘æ ¸å¿ƒ**ã€‚

---

## 4. åŒæŒ‡é’ˆåœ¨é“¾è¡¨éå†ä¸­çš„ä½œç”¨  

åŒæŒ‡é’ˆï¼ˆTwo Pointersï¼‰æ˜¯é“¾è¡¨é¢˜ä¸­æä¸ºå¸¸ç”¨çš„æŠ€å·§ã€‚  
å®ƒé€šè¿‡åŒæ—¶æ§åˆ¶ä¸¤ä¸ªæŒ‡é’ˆçš„ä½ç½®æˆ–é€Ÿåº¦å·®ï¼Œèƒ½å¤Ÿåœ¨ä¸€æ¬¡éå†ä¸­å®Œæˆéœ€è¦å¤šæ¬¡æ“ä½œçš„ä»»åŠ¡ã€‚  
åœ¨é“¾è¡¨é—®é¢˜ä¸­ï¼ŒåŒæŒ‡é’ˆå¸¸ç”¨äº**å®šä½èŠ‚ç‚¹ã€æ£€æµ‹ç¯ã€æ‰¾ä¸­ç‚¹ã€åˆ é™¤å€’æ•°èŠ‚ç‚¹**ç­‰æƒ…å½¢ã€‚  
ä¸‹é¢é€šè¿‡ä¸¤é“ç»å…¸é¢˜ç›®æ¥ç†è§£åŒæŒ‡é’ˆçš„ä¸¤ç§å…¸å‹åº”ç”¨ï¼š  

- **Leetcode 19ï¼šåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªèŠ‚ç‚¹**  
- **Leetcode 142ï¼šç¯å½¢é“¾è¡¨ IIï¼ˆæ£€æµ‹ç¯çš„å…¥å£ï¼‰**

---

### 4.1 åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªèŠ‚ç‚¹  
å‚è€ƒï¼š[Leetcode 19 - Remove Nth Node From End of List](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)

#### æ€è·¯ä¸ç®—æ³•  

åœ¨ä¸é¢„å¤„ç†é“¾è¡¨é•¿åº¦ã€ä¸”ä»…ä½¿ç”¨å¸¸æ•°ç©ºé—´çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `first` å’Œ `second`ã€‚  
è®© `first` æ¯” `second` **è¶…å‰ n ä¸ªèŠ‚ç‚¹**ï¼Œå½“ `first` åˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œ`second` å°±ä½äºå€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªä½ç½®ã€‚  
æ­¤æ—¶åªéœ€ä¿®æ”¹ `second->next` å³å¯å®Œæˆåˆ é™¤ã€‚

#### æ­¥éª¤è¯´æ˜  

1. **åˆå§‹åŒ–**  
   åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ `dummy`ï¼Œä»¤ `dummy->next = head`ã€‚  
   è¿™æ ·å³ä½¿åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹ï¼Œä¹Ÿèƒ½ç»Ÿä¸€å¤„ç†é€»è¾‘ã€‚

2. **å»ºç«‹é—´è·**  
   è®© `first` ä» `head` å¼€å§‹å‰è¿› `n` æ¬¡ï¼Œä½¿ `first` æ¯” `second` æå‰ `n` ä¸ªèŠ‚ç‚¹ã€‚

3. **åŒæ­¥å‰è¿›**  
   åŒæ—¶ç§»åŠ¨ `first` å’Œ `second`ï¼Œç›´åˆ° `first` æŒ‡å‘ç©ºã€‚  
   æ­¤æ—¶ï¼Œ`second->next` å³ä¸ºéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚

4. **æ‰§è¡Œåˆ é™¤æ“ä½œ**  
   æ‰§è¡Œ `second->next = second->next->next;` å®Œæˆåˆ é™¤ã€‚

5. **è¿”å›ç»“æœ**  
   è¿”å› `dummy->next` å³æ–°çš„é“¾è¡¨å¤´èŠ‚ç‚¹ã€‚

---

#### ä»£ç å®ç°ï¼ˆC++ï¼‰

```cpp
class Solution {
public:
    ListNode* removeNthFromEnd(ListNode* head, int n) {
        ListNode* dummy = new ListNode(0, head);
        ListNode* first = head;
        ListNode* second = dummy;
        for (int i = 0; i < n; ++i) {
            first = first->next;
        }
        while (first) {
            first = first->next;
            second = second->next;
        }
        second->next = second->next->next;
        ListNode* ans = dummy->next;
        delete dummy;
        return ans;
    }
};
```

#### å¤æ‚åº¦åˆ†æ

* **æ—¶é—´å¤æ‚åº¦**ï¼šO(L)ï¼Œå…¶ä¸­ L ä¸ºé“¾è¡¨é•¿åº¦ã€‚
* **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)ï¼Œä»…ä½¿ç”¨å¸¸æ•°é¢å¤–æŒ‡é’ˆã€‚

---

### 4.2 æ£€æµ‹ç¯å½¢é“¾è¡¨å¹¶æ‰¾åˆ°ç¯çš„å…¥å£

å‚è€ƒï¼š[Leetcode 142 - Linked List Cycle II](https://leetcode.cn/problems/linked-list-cycle-ii/)

#### æ€è·¯ä¸ç®—æ³•

Floyd åˆ¤åœˆç®—æ³•ï¼ˆå¿«æ…¢æŒ‡é’ˆæ³•ï¼‰åˆ©ç”¨äº†ä¸¤ä¸ªä¸åŒé€Ÿåº¦çš„æŒ‡é’ˆï¼š

* å¿«æŒ‡é’ˆ `fast` æ¯æ¬¡èµ°ä¸¤æ­¥ï¼›
* æ…¢æŒ‡é’ˆ `slow` æ¯æ¬¡èµ°ä¸€æ­¥ã€‚

è‹¥é“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œå¿«æ…¢æŒ‡é’ˆæœ€ç»ˆä¼šåœ¨ç¯å†…ç›¸é‡ï¼›è‹¥ä¸å­˜åœ¨ç¯ï¼Œ`fast` ä¼šå…ˆåˆ°è¾¾ `NULL`ã€‚
å½“ä¸¤è€…ç›¸é‡åï¼Œå°†ä¸€ä¸ªæ–°æŒ‡é’ˆ `ptr` ä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œä¸ `slow` åŒé€Ÿå‰è¿›ï¼Œ
ä¸¤è€…å†æ¬¡ç›¸é‡çš„èŠ‚ç‚¹å°±æ˜¯ç¯çš„å…¥å£ã€‚

#### æ­¥éª¤è¯´æ˜

1. **åˆå§‹åŒ–**
   è®¾ç½® `fast = head`, `slow = head`ã€‚

2. **ç¬¬ä¸€é˜¶æ®µï¼šæ£€æµ‹ç¯çš„å­˜åœ¨**
   åŒæ—¶ç§»åŠ¨å¿«æ…¢æŒ‡é’ˆï¼š

   ```cpp
   while (fast && fast->next) {
       fast = fast->next->next;
       slow = slow->next;
       if (fast == slow) break;
   }
   ```

   è‹¥å¾ªç¯ç»“æŸæ—¶ `fast == NULL` æˆ– `fast->next == NULL`ï¼Œè¯´æ˜æ— ç¯ï¼Œè¿”å› `NULL`ã€‚

3. **ç¬¬äºŒé˜¶æ®µï¼šå¯»æ‰¾ç¯çš„å…¥å£**
   è‹¥å­˜åœ¨ç¯ï¼Œè®¾ `ptr = head`ï¼Œç„¶ååŒæ­¥ç§»åŠ¨ `ptr` ä¸ `slow`ï¼š

   ```cpp
   while (ptr != slow) {
       ptr = ptr->next;
       slow = slow->next;
   }
   return ptr;
   ```

   å½“ä¸¤è€…å†æ¬¡ç›¸é‡æ—¶ï¼Œå³ä¸ºç¯çš„å…¥å£èŠ‚ç‚¹ã€‚

---

#### ä»£ç å®ç°ï¼ˆC++ï¼‰

```cpp
class Solution {
public:
    ListNode* detectCycle(ListNode* head) {
        ListNode* fast = head;
        ListNode* slow = head;

        // é˜¶æ®µ1ï¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¯
        while (fast && fast->next) {
            fast = fast->next->next;
            slow = slow->next;
            if (fast == slow) break;
        }

        // æ— ç¯æƒ…å†µ
        if (!fast || !fast->next) return NULL;

        // é˜¶æ®µ2ï¼šå¯»æ‰¾ç¯å…¥å£
        ListNode* ptr = head;
        while (ptr != slow) {
            ptr = ptr->next;
            slow = slow->next;
        }
        return ptr;
    }
};
```

#### å¤æ‚åº¦åˆ†æ

* **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œn ä¸ºé“¾è¡¨é•¿åº¦ï¼Œå¿«æ…¢æŒ‡é’ˆæœ€å¤šå„éå†ä¸€æ¬¡é“¾è¡¨ã€‚
* **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)ï¼Œä»…ä½¿ç”¨ä¸¤ä¸ªé¢å¤–æŒ‡é’ˆã€‚

---

### 4.3 æ–¹æ³•æ€»ç»“

åŒæŒ‡é’ˆçš„å…³é”®åœ¨äº**æ§åˆ¶ä¸¤è€…ä¹‹é—´çš„ç›¸å¯¹å…³ç³»**ï¼š

* åœ¨åˆ é™¤å€’æ•°ç¬¬ N ä¸ªèŠ‚ç‚¹æ—¶ï¼Œåˆ©ç”¨â€œå›ºå®šé—´è·â€ï¼›
* åœ¨æ£€æµ‹ç¯æ—¶ï¼Œåˆ©ç”¨â€œé€Ÿåº¦å·®â€ã€‚

è¿™ç§æŠ€å·§ä¸ä»…èƒ½å‡å°‘éå†æ¬¡æ•°ï¼Œè¿˜èƒ½è®©ç®—æ³•ç»“æ„æ›´ç›´è§‚ä¼˜é›…ã€‚
åœ¨é“¾è¡¨ä¸­ï¼ŒæŒæ¡åŒæŒ‡é’ˆæ€æƒ³å‡ ä¹ç­‰äºæŒæ¡äº†å¤§éƒ¨åˆ†æ ¸å¿ƒé—®é¢˜çš„è§£é¢˜æ€è·¯ã€‚

---

## 5. å‰ç¼€å’Œä¸å¤šç»´å‰ç¼€å’Œ

### 5.1 ä¸€ç»´å‰ç¼€å’Œï¼ˆåŒºé—´å’Œé—®é¢˜ï¼‰

#### 5.1.1 é—®é¢˜èƒŒæ™¯

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `Array`ï¼Œéœ€è¦å¿«é€Ÿæ±‚ä»»æ„åŒºé—´ `[l, r]` å†…æ‰€æœ‰å…ƒç´ çš„å’Œã€‚

æœ€æœ´ç´ çš„åšæ³•æ˜¯æ¯æ¬¡éå†æ±‚å’Œï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n*q)`ï¼ˆq ä¸ºæŸ¥è¯¢æ¬¡æ•°ï¼‰ï¼Œæ˜¾ç„¶åœ¨å¤šæ¬¡æŸ¥è¯¢æ—¶æ•ˆç‡ä½ã€‚
å‰ç¼€å’Œï¼ˆPrefix Sumï¼‰æ˜¯ä¸€ç§é¢„å¤„ç†æ€æƒ³ï¼Œèƒ½å°†**åŒºé—´æ±‚å’Œ**çš„æ—¶é—´å¤æ‚åº¦ä» O(n) é™åˆ° **O(1)**ã€‚

#### 5.1.2 å®šä¹‰ä¸å…¬å¼

å®šä¹‰å‰ç¼€å’Œæ•°ç»„ `pre[i]` è¡¨ç¤ºå‰ `i` ä¸ªå…ƒç´ çš„æ€»å’Œï¼š
$$
pre[i] = a_1 + a_2 + \cdots + a_i
$$

åˆ™ä»»æ„åŒºé—´ `[l, r]` çš„å’Œå¯ç”±å‰ç¼€å·®å¾—åˆ°ï¼š
$$
sum(l, r) = pre[r] - pre[l - 1]
$$

å…¶ä¸­ `pre[0] = 0`ï¼Œç”¨äºå¤„ç†è¾¹ç•Œã€‚

#### 5.1.3 æ—¶é—´å¤æ‚åº¦åˆ†æ

* æ„å»ºå‰ç¼€å’Œï¼šO(n)
* å•æ¬¡åŒºé—´æ±‚å’Œï¼šO(1)
* æ€»ä½“å¤æ‚åº¦ï¼šO(n + q)

#### 5.1.4 ç¤ºä¾‹ä»£ç 

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    int n, q;
    cin >> n;
    vector<int> a(n + 1), pre(n + 1, 0);
    for (int i = 1; i <= n; i++) cin >> a[i];
    
    // æ„å»ºå‰ç¼€å’Œ
    for (int i = 1; i <= n; i++) pre[i] = pre[i - 1] + a[i];
    
    cin >> q;
    while (q--) {
        int l, r;
        cin >> l >> r;
        cout << pre[r] - pre[l - 1] << endl;
    }
}
```

---

### 5.2 äºŒç»´å‰ç¼€å’Œï¼ˆå¼€å‘å•†è´­ä¹°åœŸåœ°é—®é¢˜ï¼‰

#### 5.2.1 é—®é¢˜èƒŒæ™¯

åœ¨ä¸€ä¸ª `n Ã— m` çš„çŸ©é˜µä¸­ï¼Œæ¯ä¸ªæ ¼å­æœ‰ä¸€ä¸ªæƒå€¼ï¼Œä»£è¡¨åœŸåœ°ä»·å€¼ã€‚
è¦åœ¨ä¸€æ¡**æ¨ªçº¿**æˆ–**ç«–çº¿**ä¸Šå°†åŸå¸‚åŒºåŸŸåˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä½¿å¾—ä¸¤éƒ¨åˆ†çš„æ€»å’Œå·®æœ€å°ã€‚

ç”±äºçŸ©é˜µæ•°æ®è¾ƒå¤§ï¼Œç›´æ¥æšä¸¾å­çŸ©é˜µä¼šè¶…æ—¶ï¼Œéœ€è¦ä½¿ç”¨**äºŒç»´å‰ç¼€å’Œ**å¿«é€Ÿæ±‚ä»»æ„çŸ©å½¢åŒºåŸŸçš„å’Œã€‚

---

#### 5.2.2 äºŒç»´å‰ç¼€å’Œå®šä¹‰

å®šä¹‰ `pre[i][j]` ä¸ºä»å·¦ä¸Šè§’ `(1, 1)` åˆ° `(i, j)` çš„çŸ©å½¢åŒºåŸŸçš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼š
$$
pre[i][j] = pre[i-1][j] + pre[i][j-1] - pre[i-1][j-1] + a[i][j]
$$

ä»»æ„å­çŸ©å½¢ `(x1, y1)` åˆ° `(x2, y2)` çš„å’Œä¸ºï¼š
$$
sum = pre[x2][y2] - pre[x1-1][y2] - pre[x2][y1-1] + pre[x1-1][y1-1]
$$

---

#### 5.2.3 åˆ‡å‰²æ€è·¯

ç”±äºé¢˜ç›®åªå…è®¸**ä¸€åˆ€åˆ‡**ï¼ˆæ¨ªæˆ–ç«–ï¼‰ï¼Œæˆ‘ä»¬åªéœ€æšä¸¾åˆ‡å‰²çº¿ï¼š

* **æ¨ªå‘åˆ‡å‰²**ï¼šåœ¨ç¬¬ i è¡Œå’Œç¬¬ i+1 è¡Œä¹‹é—´åˆ‡
  ä¸Šæ–¹å’Œä¸º `pre[i][m]`ï¼Œä¸‹æ–¹å’Œä¸º `total - pre[i][m]`
* **çºµå‘åˆ‡å‰²**ï¼šåœ¨ç¬¬ j åˆ—å’Œç¬¬ j+1 åˆ—ä¹‹é—´åˆ‡
  å·¦æ–¹å’Œä¸º `pre[n][j]`ï¼Œå³æ–¹å’Œä¸º `total - pre[n][j]`

å·®å€¼ä¸ºï¼š
$$
diff = |S_1 - S_2|
$$

æšä¸¾è¡Œ/åˆ—æ±‚æœ€å°å·®å€¼å³å¯ã€‚

---

#### 5.2.4 æ—¶é—´å¤æ‚åº¦åˆ†æ

* æ„å»ºäºŒç»´å‰ç¼€å’Œï¼šO(n*m)
* æšä¸¾è¡Œåˆ‡å‰²ï¼šO(n)
* æšä¸¾åˆ—åˆ‡å‰²ï¼šO(m)

æ€»å¤æ‚åº¦ï¼š**O(n*m)**ï¼Œåœ¨ n, m â‰¤ 100 æ—¶æå¿«ã€‚

---

#### 5.2.5 ç¤ºä¾‹ä»£ç 

```cpp
#include <iostream>
#include <vector>
#include <cmath>
using namespace std;

int main() {
    int n, m;
    cin >> n >> m;
    vector<vector<int>> a(n + 1, vector<int>(m + 1, 0));
    vector<vector<int>> pre(n + 1, vector<int>(m + 1, 0));

    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= m; ++j)
            cin >> a[i][j];

    // æ„å»ºäºŒç»´å‰ç¼€å’Œ
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= m; ++j)
            pre[i][j] = pre[i - 1][j] + pre[i][j - 1] - pre[i - 1][j - 1] + a[i][j];

    int total = pre[n][m];
    int ans = 1e9;

    // æ¨ªå‘åˆ‡å‰²
    for (int i = 1; i < n; ++i) {
        int up = pre[i][m];
        int down = total - up;
        ans = min(ans, abs(up - down));
    }

    // çºµå‘åˆ‡å‰²
    for (int j = 1; j < m; ++j) {
        int left = pre[n][j];
        int right = total - left;
        ans = min(ans, abs(left - right));
    }

    cout << ans << endl;
    return 0;
}
```
---
#### 5.2.6 æ€æƒ³å°ç»“

* **å‰ç¼€å’Œ**æ˜¯ä¸€ç§å…¸å‹çš„â€œä»¥ç©ºé—´æ¢æ—¶é—´â€çš„ç®—æ³•æ€æƒ³ã€‚
* **ä¸€ç»´å‰ç¼€å’Œ**é€‚ç”¨äºåŒºé—´æ±‚å’Œã€‚
* **äºŒç»´å‰ç¼€å’Œ**å°†è¿™ç§æ€æƒ³æ¨å¹¿åˆ°çŸ©é˜µæ±‚å’Œï¼Œä½¿å¾—å­åŒºåŸŸæŸ¥è¯¢å˜ä¸º O(1)ã€‚
* è¿™ç±»é¢˜çš„æœ¬è´¨æ˜¯ï¼š**å‡å°‘é‡å¤è®¡ç®—ï¼Œå¿«é€Ÿè·å¾—ä»»æ„åŒºåŸŸçš„ç´¯ç§¯ä¿¡æ¯**ã€‚
